generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(uuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  email     String   @unique
  password  String
  name      String
  role      Role
}

model ScenicRegion {
  id                      String             @id @default(uuid())
  createdAt               DateTime           @default(now())
  updatedAt               DateTime           @updatedAt
  displayName             String
  location                String
  zoom                    Int
  minZoom                 Int
  maxZoom                 Int
  handDrawingNE           String
  handDrawingSW           String
  enableNavigation        Boolean
  enablePoiLanguageSwitch Boolean
  sliceState              SliceState         @default(PENDING)
  scenicRegionInfos       ScenicRegionInfo[]
  scenicSpots             ScenicSpot[]
  scenicSpotTypes         ScenicSpotType[]
  touringRoutes           TouringRoute[]
}

model ScenicRegionInfo {
  id                String       @id @default(uuid())
  createdAt         DateTime     @default(now())
  updatedAt         DateTime     @updatedAt
  scenicRegionId    String
  name              String
  title             String
  layer             String
  layersDisplayName String
  vrUrl             String
  ticketUrl         String
  handDrawingUri    String
  lang              Language     @default(CHINESE)
  scenicRegion      ScenicRegion @relation(fields: [scenicRegionId], references: [id])
}

model ScenicSpotType {
  id                  String               @id @default(uuid())
  createdAt           DateTime             @default(now())
  updatedAt           DateTime             @updatedAt
  displayName         String
  rank                Int
  scenicRegionId      String?
  ScenicRegion        ScenicRegion?        @relation(fields: [scenicRegionId], references: [id])
  scenicSpots         ScenicSpot[]
  scenicSpotTypeInfos ScenicSpotTypeInfo[]
}

model ScenicSpotTypeInfo {
  id               String         @id @default(uuid())
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
  scenicSpotTypeId String
  name             String
  lang             Language       @default(CHINESE)
  scenicSpotType   ScenicSpotType @relation(fields: [scenicSpotTypeId], references: [id])
}

model ScenicSpot {
  id               String           @id @default(uuid())
  createdAt        DateTime         @default(now())
  updatedAt        DateTime         @updatedAt
  scenicRegionId   String
  scenicSpotTypeId String
  displayName      String
  hidden           Boolean
  scenicRegion     ScenicRegion     @relation(fields: [scenicRegionId], references: [id])
  scenicSpotType   ScenicSpotType   @relation(fields: [scenicSpotTypeId], references: [id])
  scenicSpotInfos  ScenicSpotInfo[]
}

model ScenicSpotInfo {
  id           String     @id @default(uuid())
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
  scenicSpotId String
  name         String
  introduction String
  iconUri      String
  audioUri     String
  imageUri     String
  lang         Language   @default(CHINESE)
  scenicSpot   ScenicSpot @relation(fields: [scenicSpotId], references: [id])
}

model TouringRoute {
  id                String             @id @default(uuid())
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt
  displayName       String
  scenicRegionId    String
  scenicRegion      ScenicRegion       @relation(fields: [scenicRegionId], references: [id])
  touringRouteInfos TouringRouteInfo[]
}

model TouringRouteInfo {
  id             String       @id @default(uuid())
  createdAt      DateTime     @default(now())
  updatedAt      DateTime     @updatedAt
  touringRouteId String
  title          String
  content        String
  lang           Language     @default(CHINESE)
  touringRoute   TouringRoute @relation(fields: [touringRouteId], references: [id])
}

enum Role {
  ADMIN
  USER
}

enum SliceState {
  PENDING
  SLICING
  SUCCESS
}

enum Language {
  CHINESE
  ENGLISH
  JAPANESE
  KOREAN
}
